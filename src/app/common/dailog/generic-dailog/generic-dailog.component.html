<h1 mat-dialog-title>{{ title }}</h1>
<div mat-dialog-content>
  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="d-flex flex-column">
    <ng-container *ngFor="let field of fields">
      <mat-form-field appearance="fill" *ngIf="field.type !== 'button'">
        <mat-label>{{ field.label }}</mat-label>
        <ng-container [ngSwitch]="field.type">
          <mat-select *ngSwitchCase="'select'" [formControlName]="field.name" required>
            <mat-option *ngFor="let option of field.options" [value]="option.value">{{ option.label }}</mat-option>
          </mat-select>
          <ng-container *ngSwitchCase="'date'">
            <input matInput [matDatepicker]="picker" [formControlName]="field.name" required>
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </ng-container>
          <input matInput *ngSwitchCase="'autocomplete'" [matAutocomplete]="auto" [formControlName]="field.name" (input)="filterOptions(field)" (focus)="filterOptions(field)">
          <mat-autocomplete #auto="matAutocomplete">
            <mat-option *ngFor="let option of filteredOptions[field.name]" [value]="option">{{ option }}</mat-option>
          </mat-autocomplete>
          <input matInput *ngSwitchCase="'number'" type="number" [formControlName]="field.name" required>
        </ng-container>
      </mat-form-field>
    </ng-container>

    <div mat-dialog-actions>
      <button mat-button type="button" (click)="onCancel()">Cancel</button>
      <button mat-button type="submit">Submit</button>
    </div>
  </form>
</div>
